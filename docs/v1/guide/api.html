
<!DOCTYPE html>
<html lang="en">
    <head>

    <title>服务接口 — CatLib</title>
    <meta charset="utf-8">
    <meta name="description" content="CatLib Unity Framework.">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <link rel="stylesheet" href="/css/page.css">

    <script src="/js/vue.js"></script>
    <script src="/js/jquery.js"></script>
    </head>

    <body>
        
            <nav class="nav">
    <div class="border">
        <img src="/images/logo.png" />
        <button class="hiden-in-phone">V0.8</button>
        <button id="btn-menu" class="hiden-in-pc">菜单</button>
        <ul class="nav-link hiden-in-phone">
            <!--li>
                <form id="search-form">
                    <input type="text" id="search-query" class="search-query">
                </form>
            </li!-->
            <li><a href="https://github.com/catlib/catlib" class="nav-link-li">下载框架</a></li>
            <li><a href="/v1/guide/use.html" class="nav-link-li">使用案例</a></li>
            <li><a href="/v1/guide/version.html" class="nav-link-li">版本说明</a></li>
            <li><a href="/v1/guide/contribution.html" class="nav-link-li">贡献指南</a></li>
            <li><a href="/v1/guide/index.html" class="nav-link-li">介绍</a></li>
            <li><a href="/" class="nav-link-li current">首页</a></li>
        </ul>
    </div>
</nav>

<div id="container" class="container clear">
    <section class="sidebar clearfix">
    <ul>
        
            
            
                <li><h3>基础</h3></li>
            
            
            
            <li>
                <p><a href="/v1/guide/index.html" class="sidebar-link">介绍</a></p>
            </li>
        
            
            
            
            
            <li>
                <p><a href="/v1/guide/upgrade.html" class="sidebar-link">升级指南</a></p>
            </li>
        
            
            
            
            
            <li>
                <p><a href="/v1/guide/version.html" class="sidebar-link">版本说明</a></p>
            </li>
        
            
            
            
            
            <li>
                <p><a href="/v1/guide/error.html" class="sidebar-link">常见错误</a></p>
            </li>
        
            
            
            
            
            <li>
                <p><a href="/v1/guide/style.html" class="sidebar-link">命名规范</a></p>
            </li>
        
            
            
            
            
            <li>
                <p><a href="/v1/guide/contribution.html" class="sidebar-link">贡献指南</a></p>
            </li>
        
            
            
            
            
            <li>
                <p><a href="/v1/guide/use.html" class="sidebar-link">使用案例</a></p>
            </li>
        
            
            
            
                <li><h3>系统架构</h3></li>
            
            
            <li>
                <p><a href="/v1/guide/service-provider.html" class="sidebar-link">服务提供者</a></p>
            </li>
        
            
            
            
            
            <li>
                <p><a href="/v1/guide/container.html" class="sidebar-link">服务容器</a></p>
            </li>
        
            
            
            
            
            <li>
                <p><a href="/v1/guide/application.html" class="sidebar-link">CatLib核心</a></p>
            </li>
        
            
            
            
            
            <li>
                <p><a href="/v1/guide/api.html" class="sidebar-link current">服务接口</a></p>
            </li>
        
            
            
            
            
            <li>
                <p><a href="/v1/guide/facade.html" class="sidebar-link">服务门面</a></p>
            </li>
        
            
            
            
            
                <li><h3>核心组件</h3></li>
            
            <li>
                <p><a href="/v1/guide/config.html" class="sidebar-link">配置</a></p>
            </li>
        
            
            
            
            
            <li>
                <p><a href="/v1/guide/routing.html" class="sidebar-link">路由</a></p>
            </li>
        
            
            
            
            
            <li>
                <p><a href="/v1/guide/stl.html" class="sidebar-link">标准库</a></p>
            </li>
        
            
            
            
            
            <li>
                <p><a href="/v1/guide/file-system.html" class="sidebar-link">文件系统</a></p>
            </li>
        
            
            
            
            
            <li>
                <p><a href="/v1/guide/time.html" class="sidebar-link">时间</a></p>
            </li>
        
            
            
            
            
            <li>
                <p><a href="/v1/guide/timer.html" class="sidebar-link">计时器</a></p>
            </li>
        
    </ul>
</section>
    <article class="clearfix">
    <h2 id="服务接口"><a href="#服务接口" class="headerlink" title="服务接口"></a>服务接口</h2><p>服务接口是指框架提供的一系列定义核心组件服务的接口(下面简称:服务)。如：<code>IRouter</code> 接口定义了路由服务可以被使用的方法。</p>
<p>每一个接口框架都有提供相应实现。例如，CatLib为文件系统提供了多种驱动实现。</p>
<p>所有的CatLib服务都在简单的接口中定义，很容易来判断给定服务所提供功能，程序接口也可以充当框架特性的简明文档。</p>
<p>CatLib所有核心接口全部放于<code>CatLib.API</code>命名空间下。</p>
<h3 id="何时使用"><a href="#何时使用" class="headerlink" title="何时使用"></a>何时使用</h3><h4 id="松耦合"><a href="#松耦合" class="headerlink" title="松耦合"></a><strong>松耦合</strong></h4><p>在这个类中，代码和给定文件系统实现紧密耦合（这是一个<code>反面例子</code>），由于我们需求一个具体实现类，如果组件的API变了，那么相应的，我们的代码必须做修改。</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Service</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">private</span> FileSystem localFileSystem;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Service</span>(<span class="params"></span>)</span></div><div class="line">    &#123;</div><div class="line">        localFileSystem = <span class="keyword">new</span> FileSystem();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>类似的，如果我们想要替换底层的文件服务为别的技术实现，我们将再一次不得不修改我们的代码来适应新的文件服务。</p>
<p>所以为了避免上述情况，我们可以基于一种简单的、与提供者无关的接口来优化我们的代码，从而替代上述那种实现：</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Service</span></div><div class="line">&#123;</div><div class="line">    [<span class="meta">Inject</span>]</div><div class="line">    <span class="keyword">public</span> IFileSystem LocalFileSystem &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>现在代码就不与任何特定提供者耦合，甚至与 CatLib 都是无关的。由于API不包含任何实现和依赖，你可以轻松的为给定接口编写可替换的实现代码，你可以随意替换文件服务实现而不用去修改任何高层消费代码。</p>
<h4 id="简明"><a href="#简明" class="headerlink" title="简明"></a><strong>简明</strong></h4><p>此外，基于简单接口，代码也更容易理解和维护。</p>
<p>在一个庞大而复杂的类中，与其追踪哪些方法是有效的，不如转向简单、干净的接口。</p>
<h3 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h3><p>您可以为属性选择器标注<code>[Inject]</code>或者在类的<code>构造函数</code>中定义变量类型为接口类型。</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Service</span></div><div class="line">&#123;</div><div class="line">    [<span class="meta">Inject</span>]</div><div class="line">    <span class="keyword">public</span> IFileSystem LocalFileSystem &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Service</span>(<span class="params">IFileSystem fileSystem</span>)</span></div><div class="line">    &#123;</div><div class="line">        <span class="comment">//构造函数 和 属性选择器 都可以被注入</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="接口列表"><a href="#接口列表" class="headerlink" title="接口列表"></a>接口列表</h3><p>下面列出了Catlib核心中可以被直接<code>Application.Make()</code>的接口列表(适用于CatLib.Unity):</p>
<table>
<thead>
<tr>
<th>接口名</th>
<th style="text-align:center">接口描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>IConfigManager</code></td>
<td style="text-align:center">全局配置</td>
</tr>
<tr>
<td><code>IEnv</code></td>
<td style="text-align:center">环境</td>
</tr>
<tr>
<td><code>IFileSystemManager</code></td>
<td style="text-align:center">文件系统</td>
</tr>
<tr>
<td><code>IRouter</code></td>
<td style="text-align:center">路由</td>
</tr>
<tr>
<td><code>ITimeManager</code></td>
<td style="text-align:center">时间</td>
</tr>
<tr>
<td><code>ITimerManager</code></td>
<td style="text-align:center">计时器</td>
</tr>
</tbody>
</table>

    <div class="footer">
        发现错误？想参与编辑？ 
        <a href="https://github.com/catlib/catlib.github.io/blob/master/src/v1/guide/api.md" target="_blank">
            在 Github 上编辑此页！
        </a>
    </div>
</article>

<div class="sub-nav hiden-in-phone">
    <dl id="sub-nav">
        <dt>本文内容</dt>
        <dd v-for="(ele, index) in sub_nav">
           <a v-bind:href="ele.href">{{ ele.name }}</a>
        </dd>
    </dl>
</div> 
</div>

<footer>
    <div>
        <p>© Copyright 2017 catlib.io All Rights Reserved</p>
        <p>喵喵喵，快来一起玩喵~</p>
    </div>
</footer>


<script>
var vm = new Vue({
    el : '#container',
    data: {
        sub_nav : [ ]
    },
    created:function(){
        var obj = [];
        $("article h3").each(function(){
            obj.push({name :  $(this).find("a").attr("title") , href : "#"+$(this).attr("id") });
        });

        this.sub_nav = obj;       
    }
});

var isShow = false;
$("nav").on("click","#btn-menu" , function(){

    if(!isShow){
        
        if($(document).scrollTop() > $(".sidebar").height() - 100){

            $('html, body').animate({scrollTop:0} , 300, "swing",function(){

                $(".sidebar").fadeIn();
                $(".container").animate({"left" : "15rem"}, 500,"swing");
            });
        }else{

                $(".sidebar").fadeIn();
                $(".container").animate({"left" : "15rem"}, 500,"swing");

        }

    }else{
        $(".sidebar").fadeOut();
        $(".container").animate({"left" : "0rem"}, 500,"swing");
    }
    isShow = !isShow;

});

$(".container").on("click" , "article" , function(){

    if(isShow){
        $(".sidebar").fadeOut();
        $(".container").animate({"left" : "0rem"}, 500,"swing");
        isShow = false;    
    }

});
</script>
        
    </body>
</html>